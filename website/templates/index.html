{% extends "layout.html" %}

{% block title %}
    Login
{% endblock %}

{% block main %}
        <script>
             function modal(id) {
                const buttons = document.getElementsByClassName('more-info');
                const modal = document.querySelector('.modal');
                const modalClose = document.querySelector('.modal-close-button');

                for (let button of buttons) {
                    button.addEventListener('click', function (e) {
                        if (event.target.tagName == 'A') {
                            const item = e.target.parentElement;
                            const first = item.parentElement;
                            const h3 = item.querySelector('.book-title').innerHTML;
                            const author = item.querySelector('#book-author').innerHTML;
                            const publishDate = item.querySelector('#book-published').innerHTML;
                            const pg = item.querySelector('#book-pg-count').innerHTML;
                            const desc = item.querySelector('.book-description').innerHTML;
                            const img = first.querySelector('.book-cover').innerHTML;
                            // modal.querySelector('.modal-title').innerHTML = h3;
                            modal.querySelector('.modal-body').innerHTML = 
                            `
                            <div class="modal-img">${img}</div>
                            <div class="modal-book-title">${h3}</div>
                            <div class="modal-info">
                                <div>${author}</div>
                                <div>${publishDate}</div>
                                <div>${pg}</div>
                                <div class="modal-desc"><span class="card-text">Description:</span> ${desc}</div>
                            </div>
                            `
                            
                                    
                            console.log(item);
                            openModal(modal);
                        }
                    })
                };

                modal.addEventListener('click', function (e) {
                    if (e.target == modal) {
                        openModal(modal);
                    }
                })

                modalClose.addEventListener('click', closeModal);

                function openModal(modal) {
                    if (modal == null) return;
                    modal.classList.add('active');
                }
                function closeModal() {
                    if (modal == null) return;
                    modal.classList.remove('active');
                    
                }
            };
        </script>
        <div class="main-image d-flex align-items-center justify-content-center flex-column">
            <div class="search-container">
                <div class="search-header p-3">Find a book</div>
                    <div class="form-group search">
                        <input id="input-search" type="text" class="form-control" placeholder='"Lord of the Rings"'>
                        <button id="search" class="btn btn-secondary">Search</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="book-list mt-5" style="display:none">
            <h2 class="text-center">Search Results</h2>
            <div class="results-container" id="search-results">

            </div>
        </div>
        <!-- MODAL -->
        <div class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title"></div>
                    <button class="modal-close-button">&times;</button>
                </div>
                <div class="modal-body">
                    <p></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary add-book">Add to Shelf</p>
                </div>
            </div>
        </div>
        <!-- MODAL END -->
        <script src="static/script.js"></script>
{% endblock %}

